<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sentinel-2 Image Comparison</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/img-comparison-slider@8/dist/styles.css"/>
    <style>
        /* Base Layout and New Theme Backgrounds */
        html, body {
            margin: 0;
            padding: 0;
            height: 100%;
            display: flex;
            flex-direction: column;
            background-image: url('contours.jpg'); /* New theme background */
            background-size: cover;
            background-repeat: no-repeat;
            background-attachment: fixed;
            font-family: 'Helvetica', 'Arial', sans-serif; /* New theme font family */
            line-height: 1.6;
            overflow: hidden; /* Crucial: Prevent overall body scrollbar */
        }

        /* #top-banner is REMOVED */

        /* New Theme Navbar - Start */
        #menu {
            background: #4061A6;
            height: 45px;
            border-radius: 0px;
            flex-shrink: 0; /* Prevent navbar from shrinking */
        }
        #menu ul, #menu li {
            margin: 0 auto;
            padding: 0;
            list-style: none
        }
        #menu ul {
            width: 100%;
            text-align: left;
        }
        #menu li {
            display: inline-block;
            position: relative;
        }
        #menu a {
            display: block;
            line-height: 45px;
            padding: 0 14px;
            text-decoration: none;
            color: #FFFFFF;
            font-size: 16px;
        }
        #menu a.dropdown-arrow:after {
            content: "\25BE";
            margin-left: 5px;
        }
        #menu li a:hover {
            color: #EBB700;
            background: #F2F2F2;
        }
        #menu input {
            display: none;
            margin: 0;
            padding: 0;
            height: 45px;
            width: 100%;
            opacity: 0;
            cursor: pointer
        }
        #menu label {
            display: none;
            line-height: 45px;
            text-align: center;
            position: absolute;
            left: 35px
        }
        #menu label:before {
            font-size: 1.6em;
            color: #FFFFFF;
            content: "\2261";
            margin-left: 20px;
        }
        #menu ul.sub-menus{
            height: auto;
            overflow: hidden;
            width: 170px;
            background: #444444;
            position: absolute;
            z-index: 99;
            display: none;
        }
        #menu ul.sub-menus li {
            display: block;
            text-align: left;
            width: 100%;
        }
        #menu ul.sub-menus a {
            color: #FFFFFF;
            font-size: 16px;
        }
        #menu ul.sub-menus a:hover{
            background: #F2F2F2;
            color: #444444;
        }
        #menu li:hover ul.sub-menus {
            display: block
        }
        /* New Theme Navbar - End */

        /* Title Section - Adjusted for new theme */
        #title {
            text-align: center;
            padding: 15px 10px;
            background-color: rgba(255, 255, 255, 0.85);
            margin: 0;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            flex-shrink: 0; /* Prevent title from shrinking */
        }
        #title h1 {
            font-size: 2.2em;
            margin: 0;
            color: #000000;
            font-weight: bold;
            font-family: 'Helvetica', 'Arial', sans-serif;
        }
        #title h2 {
            font-size: 1.2em;
            margin: 10px 0 0;
            color: #4061A6;
            font-family: 'Georgia Bold', 'Arial', serif;
        }
        #title h2:after {
            content:' ';
            color: #4061A6;
            background-color: #4061A6;
            display:block;
            border:0.5px solid #000000;
            border-radius:1px;
            -webkit-border-radius:4px;
            -moz-border-radius:4px;
            box-shadow:inset 0 1px 1px rgba(0, 0, 0, .05);
            -webkit-box-shadow:inset 0 1px 1px rgba(0, 0, 0, .05);
            -moz-box-shadow:inset 0 1px 1px rgba(0, 0, 0, .05);
            width: 80%;
            margin: 5px auto 0;
        }

        /* Main content area containing map and legend */
        #main-content {
            flex: 1; /* Allows this container to grow and fill available space */
            display: flex;
            flex-direction: column;
            position: relative; /* For map's absolute positioning of search/tooltip */
            overflow: hidden; /* Crucial: Prevent scrollbar on main-content */
        }

        #map {
            flex: 1; /* Keep map flexible */
            width: 100%;
            position: relative; /* Keep for search/tooltip overlays */
        }

        /* Legend - Adjusted for new theme (h3 specifically) */
        #legend {
            padding: 5px;
            background: rgba(255, 255, 255, 0.85);
            font-family: 'Helvetica', 'Arial', sans-serif;
            box-shadow: 0 -2px 5px rgba(0,0,0,0.1);
            flex-shrink: 0; /* Prevent legend from shrinking */
        }
        #legend h3 {
            text-align: left;
            margin: 0px 0;
            color: #4061A6;
            font-family: 'Georgia Bold', 'Arial', serif;
        }
        #legend ul { margin: 0; padding-left: 20px; }


        /* Search Bar Styling (Desktop/Default) - MERGED & Adjusted */
        #search-container {
            position: absolute;
            top: 10px;
            right: 10px;
            z-index: 1000;
            background-color: rgba(255, 255, 255, 0.9);
            padding: 8px;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            display: flex;
            flex-direction: column;
            gap: 5px;
            width: 280px;
            box-sizing: border-box;
        }
        #search-input-group {
            display: flex;
            gap: 5px;
        }
        #search-input {
            border: 1px solid #ccc;
            padding: 6px 10px;
            font-size: 1em;
            border-radius: 3px;
            flex-grow: 1;
        }
        #search-button {
            background-color: #007bff;
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 3px;
            cursor: pointer;
            font-size: 1em;
            flex-shrink: 0;
        }
        #search-button:hover {
            background-color: #0056b3;
        }
        #search-results {
            width: 100%;
            background-color: white;
            border: 1px solid #ccc;
            border-radius: 0 0 5px 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            max-height: 200px;
            overflow-y: auto;
            display: none;
            z-index: 999;
        }
        #search-results ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        #search-results li {
            padding: 8px 10px;
            cursor: pointer;
            border-bottom: 1px solid #eee;
        }
        #search-results li:last-child {
            border-bottom: none;
        }
        #search-results li:hover {
            background-color: #f0f0f0;
        }

        /* Coordinate Tooltip Styling */
        #coordinate-tooltip {
            position: absolute;
            background: white;
            color: black;
            padding: 5px 8px;
            border-radius: 3px;
            white-space: nowrap;
            font-size: 0.85em;
            pointer-events: none;
            display: none;
            transform: translate(-50%, -100%);
            margin-top: -10px;
            border: 1px solid #ccc;
            font-family: 'Helvetica', 'Arial', sans-serif;
        }

        /* New Theme Footer - Fixed */
        #footer {
            background: #4061A6;
            color: white;
            text-align: center;
            padding: 5px;
            position: fixed;
            bottom: 0;
            width: 100%;
            height: 20px;
            font-size: 14px;
            font-weight: bold;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            flex-shrink: 0; /* Prevent footer from shrinking */
        }

        /* Additional Theme Styles (Tables, etc.) - Not directly used on this page, but included for consistency */
        #hike-info { margin: 20px auto; max-width: 90%; background-color: rgba(255, 255, 255, 0.8); padding: 20px; border-radius: 10px;}
        table { width: 100%; border-collapse: collapse; font-family: 'Roboto', sans-serif; }
        th, td { padding: 12px 15px; text-align: left; border-bottom: 1px solid #ddd; }
        th { background-color: #4061A6; color: #FFFFFF;; font-weight: 600; }
        tbody tr:nth-child(even) {
            background-color: #4061A6;
            color: #ffffff;
        }
        tbody tr:hover {
            background-color: #f0f0f0;
            color: #000000;
        }
        tfoot {
            font-weight: bold;
            background-color: #ffffff;
        }
        /* End of additional theme styles */

        /* --- Media Queries for Mobile Responsiveness --- */
        @media screen and (max-width: 800px) {
            /* New Theme Navbar Mobile Styles */
            #menu {position:relative}
            #menu ul {background:#444444;position:absolute;top:100%;right:0;left:0;z-index:3;height:auto;display:none;text-align:left;}
            #menu ul.sub-menus {width:100%;position:static;}
            #menu ul.sub-menus a {padding-left:30px;}
            #menu li {display:block;float:none;width:auto;}
            #menu input, #menu label {position:absolute;top:0;left:0;display:block}
            #menu input {z-index:4}
            #menu input:checked + label {color:#FFFFFF}
            #menu input:checked + label:before {content:"\00d7"}
            #menu input:checked ~ ul {display:block}
            /* End New Theme Navbar Mobile Styles */

            #title h1 {
                font-size: 1.5em;
            }
            #title h2 {
                font-size: 1em;
            }
            #title h2:after {
                width: 90%;
            }

            #search-container {
                left: 50%;
                right: auto;
                transform: translateX(-50%);
                width: 90%;
                max-width: 350px;
            }

            #search-results {
                max-height: 150px;
            }
        }

        @media screen and (max-width: 480px) {
            #title h1 {
                font-size: 1.3em;
            }
            #title h2 {
                font-size: 0.9em;
            }
            #title h2:after {
                width: 95%;
            }
            #search-container {
                top: 5px;
                padding: 5px;
                width: 95%;
            }
            #search-input {
                padding: 4px 8px;
                font-size: 0.9em;
            }
            #search-button {
                padding: 4px 10px;
                font-size: 0.9em;
            }
            #coordinate-tooltip {
                font-size: 0.75em;
            }
        }

        /* Original styles from Sentinel-2 Image Comparison website, adjusted for new theme */
        body {
            /* These properties are largely overridden by the new 'html, body' rule at the top. */
            /* font-family: Arial, sans-serif; */
            /* margin: 20px; */
            text-align: center;
            /* background-color: #f4f4f4; */
            color: #333;
        }
        h1 {
            color: #4061A6; /* Adjusted to match new theme's blue */
            margin-bottom: 10px;
            font-family: 'Helvetica', 'Arial', sans-serif; /* Adjusted to new theme font */
            font-weight: bold;
        }
        h2 {
            color: #4061A6; /* Adjusted to match new theme's blue */
            margin-top: 30px;
            margin-bottom: 10px;
            font-size: 1.5em;
            font-family: 'Georgia Bold', 'Arial', serif; /* Adjusted to new theme font */
        }
        p {
            margin-top: 20px;
            line-height: 1.6;
            max-width: 900px;
            margin-left: auto;
            margin-right: auto;
            text-align: left;
            color: #333; /* Ensure text remains readable */
        }
        ul {
            list-style: none;
            padding: 0;
            max-width: 900px;
            margin-left: auto;
            margin-right: auto;
            text-align: left;
        }
        ul li {
            margin-bottom: 8px;
            padding-left: 20px;
            position: relative;
        }
        ul li::before {
            content: "•";
            color: #4061A6; /* Adjusted to match new theme's blue */
            font-weight: bold;
            display: inline-block;
            width: 1em;
            margin-left: -1em;
        }

        img-comparison-slider {
            max-width: 900px;
            margin: 30px auto 0;
            height: auto;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            border-radius: 8px;
            overflow: hidden;
            --divider-width: 3px;
            --handle-size: 40px;
            --divider-color: rgba(255, 255, 255, 0.7);
            --handle-bg: rgba(255, 255, 255, 0.9);
            --handle-icon-color: #333;
            --handle-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        img-comparison-slider [slot="first"] > div,
        img-comparison-slider [slot="second"] > div {
            position: relative;
            width: 100%;
            height: 100%;
        }

        .image-overlay-text {
            position: absolute;
            color: white;
            background-color: rgba(0, 0, 0, 0.6);
            padding: 8px 15px;
            border-radius: 5px;
            font-size: 1.1em;
            font-weight: bold;
            z-index: 10;
            pointer-events: none;
            white-space: nowrap;
            transition: opacity 0.3s ease-in-out;
            opacity: 1;
        }

        img-comparison-slider [slot="first"] .image-overlay-text {
            top: 10px;
            left: 10px;
        }

        img-comparison-slider [slot="second"] .image-overlay-text {
            top: 10px;
            right: 10px;
        }

        .image-credit {
            max-width: 900px;
            margin: 5px auto 15px;
            font-size: 0.85em;
            color: #666;
            text-align: right;
            padding: 0 10px;
        }

        .legend-container {
            max-width: 900px;
            margin: 10px auto 30px;
            text-align: left;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            background-color: #fff;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 5px 15px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1); /* Added shadow for consistency */
        }

        .legend-container h3 {
            grid-column: 1 / -1;
            margin-top: 0;
            color: #4061A6; /* Adjusted to match new theme's blue */
            font-size: 1.1em;
            margin-bottom: 10px;
            text-align: center;
        }

        .legend-item {
            display: flex;
            align-items: center;
            margin-bottom: 0px;
        }

        .legend-color-box {
            width: 16px;
            height: 16px;
            border: 1px solid #ccc;
            margin-right: 8px;
            flex-shrink: 0;
        }

        .legend-item span {
            font-size: 0.85em;
            color: #555;
            line-height: 1.2;
        }

        /* Responsive adjustments for smaller screens */
        @media (max-width: 768px) {
            img-comparison-slider {
                max-width: 100%;
                margin: 20px 10px 0;
            }
            p, ul, .image-credit, .legend-container {
                margin-left: 10px;
                margin-right: 10px;
            }
            .image-credit {
                text-align: center;
            }
        }
    </style>
</head>
<body>
    <nav id='menu'>
        <input type='checkbox' id='responsive-menu' onclick='updatemenu()'><label for='responsive-menu'></label>
        <ul>
            <li><a href='https://aaronperry-dev.github.io/'>Home</a></li>
            <li><a href='/about'>About</a></li>
            <li><a href='https://www.linkedin.com/in/aaronperry-0012d156/'>LinkedIn</a></li>
            <li><a href='/portfolio'>Portfolio</a></li>
            <li><a href='/sentinel2'>Sentinel-2 L2A Imagery</a></li>
            <li><a href='/WMNF_Prohibitive_Camping'>Prohibitive WMNF Camping Areas</a></li>
        </ul>
    </nav>

    <div id="title">
        <h1>Sentinel-2 Imagery Comparison</h1>
    </div>

    <p>
        Explore the difference between a true-color Sentinel-2 satellite image and its corresponding land cover classification. Drag the slider bar to reveal more of either the original satellite view or the classified land cover map.
    </p>

    <img-comparison-slider id="comparisonSlider">
        <div slot="first">
            <img src="images/S2TrueColor.PNG" alt="Sentinel-2 True Color Image" />
            <span class="image-overlay-text" id="trueColorLabel">True Color</span>
        </div>

        <div slot="second">
            <img src="images/S2LandCoverClass.PNG" alt="Sentinel-2 Land Cover Classification" />
            <span class="image-overlay-text" id="landCoverLabel">Land Cover Classification</span>
        </div>
    </img-comparison-slider>

    <div class="image-credit">
        Credit: Aaron Perry, derived from Sentinel-2 L2A data.
    </div>

    <div class="legend-container">
        <h3>Land Cover Classes Legend</h3>
        <div class="legend-item">
            <div class="legend-color-box" style="background-color: #e0e0e0;"></div><span>0: Unclassified</span>
        </div>
        <div class="legend-item">
            <div class="legend-color-box" style="background-color: #d3d3d3;"></div><span>1: Clouds / Haze</span>
        </div>
        <div class="legend-item">
            <div class="legend-color-box" style="background-color: #87ceeb;"></div><span>2: Water</span>
        </div>
        <div class="legend-item">
            <div class="legend-color-box" style="background-color: #ffffff; border: 1px solid #ccc;"></div><span>3: Snow / Ice</span>
        </div>
        <div class="legend-item">
            <div class="legend-color-box" style="background-color: #696969;"></div><span>4: Cloud Shadows</span>
        </div>
        <div class="legend-item">
            <div class="legend-color-box" style="background-color: #006400;"></div><span>5: Dense Conifer Forest</span>
        </div>
        <div class="legend-item">
            <div class="legend-color-box" style="background-color: #808080;"></div><span>6: Roadways</span>
        </div>
        <div class="legend-item">
            <div class="legend-color-box" style="background-color: #008000;"></div><span>8: Dense Forest</span>
        </div>
        <div class="legend-item">
            <div class="legend-color-box" style="background-color: #98fb98;"></div><span>9: Low Vegetation</span>
        </div>
        <div class="legend-item">
            <div class="legend-color-box" style="background-color: #d2b48c;"></div><span>10: Bare Rock</span>
        </div>
        <div class="legend-item">
            <div class="legend-color-box" style="background-color: #ffc27f;"></div><span>11: Bare Soil</span>
        </div>
    </div>
    <p>
        Satellite imagery offers invaluable insights into our planet. The Sentinel-2 mission, a part of the European Union's Copernicus programme, provides high-resolution optical imagery for land monitoring, emergency services, and security. Below, we detail how these specific image products are created.
    </p>

    <h2>True Color Composite</h2>
    <p>
        A True Color composite image is created by combining specific spectral bands to visually represent the Earth's surface as it would appear to the human eye. This type of composite is often referred to as a "natural color" image.
    </p>
    <ul>
        <li><strong>Red Band (B4):</strong> Corresponds to the red part of the electromagnetic spectrum. Healthy vegetation absorbs red light strongly, while bare soil and urban areas reflect it more.</li>
        <li><strong>Green Band (B3):</strong> Corresponds to the green part of the electromagnetic spectrum. Vegetation reflects green light, which is why healthy plants appear green.</li>
        <li><strong>Blue Band (B2):</strong> Corresponds to the blue part of the electromagnetic spectrum. Water bodies tend to absorb blue light, while aerosols and haze scatter it.</li>
    </ul>
    <p>
        By assigning the Red band to the Red color channel of the display, the Green band to the Green color channel, and the Blue band to the Blue color channel (i.e., **RGB = B4, B3, B2**), we get an image that closely resembles what we would see from space. This makes it ideal for general visualization, identifying urban areas, bare ground, and recognizing cloud formations.
    </p>

    <h2>Land Cover Classification</h2>
    <p>
        A Land Cover Classification image is a thematic map derived from **Sentinel-2 L2A satellite data**, where each pixel is assigned to a specific land cover class based on its spectral characteristics. Unlike True Color images, which are direct representations of light reflection, classification images are the result of advanced data analysis and machine learning algorithms.
    </p>
    <ul>
        <li><strong>Data Source:</strong> The classification is typically performed using multiple spectral bands from Sentinel-2, often including:
            <ul>
                <li>Visible bands (Blue, Green, Red)</li>
                <li>Near-Infrared (NIR) bands (e.g., B8, B8A): Highly sensitive to vegetation health and density.</li>
                <li>Shortwave Infrared (SWIR) bands (e.g., B11, B12): Useful for distinguishing between different types of vegetation, soil moisture, and bare ground.</li>
            </ul>
        </li>
        <li><strong>Classification Process:</strong> Algorithms analyze the unique spectral signature (how different land cover types reflect and absorb light across various bands) of each pixel. This involves training the algorithm with known samples of different land cover types (e.g., forest, water, urban, agriculture).</li>
        <li><strong>Output:</strong> Each pixel is then assigned a color that represents its classified land cover type (e.g., dark green for dense forest, light green for grassland, grey for urban areas, blue for water, etc.). The specific colors used depend on the classification scheme.</li>
    </ul>
    <p>
        Land Cover Classification images are crucial for environmental monitoring, urban planning, agriculture management, and understanding ecological changes over time. They provide a simplified yet powerful thematic view of the landscape.
    </p>

    <div id="footer">
        © 2025 Aaron Perry. All rights reserved.
    </div>

    <script defer src="https://cdn.jsdelivr.net/npm/img-comparison-slider@8/dist/index.js"></script>

    <script>
        // Placeholder for the updatemenu function, required by the navbar's onclick
        function updatemenu() {
            // This function would typically handle the responsive menu toggle.
            // For now, it can be left empty or you can add specific logic here if needed.
            console.log("Menu toggle clicked!");
        }

        document.addEventListener('DOMContentLoaded', () => {
            const comparisonSlider = document.getElementById('comparisonSlider');
            const trueColorLabel = document.getElementById('trueColorLabel');
            const landCoverLabel = document.getElementById('landCoverLabel');

            let animationFrameId = null;
            let targetPercentage = 50;

            function updateSliderAndLabels() {
                if (comparisonSlider) {
                    comparisonSlider.value += (targetPercentage - comparisonSlider.value) * 0.2;

                    const currentValue = comparisonSlider.value;

                    if (currentValue > 98) {
                        landCoverLabel.style.opacity = '0';
                    } else {
                        landCoverLabel.style.opacity = '1';
                    }

                    if (currentValue < 2) {
                        trueColorLabel.style.opacity = '0';
                    } else {
                        trueColorLabel.style.opacity = '1';
                    }
                }
                animationFrameId = requestAnimationFrame(updateSliderAndLabels);
            }

            if (comparisonSlider && trueColorLabel && landCoverLabel) {
                comparisonSlider.addEventListener('mousemove', (e) => {
                    const rect = comparisonSlider.getBoundingClientRect();
                    const mouseX = e.clientX - rect.left;
                    let newPercentage = (mouseX / rect.width) * 100;

                    targetPercentage = Math.max(0, Math.min(100, newPercentage));

                    if (!animationFrameId) {
                        animationFrameId = requestAnimationFrame(updateSliderAndLabels);
                    }
                });

                comparisonSlider.addEventListener('mouseleave', () => {
                    if (animationFrameId) {
                        cancelAnimationFrame(animationFrameId);
                        animationFrameId = null;
                    }
                });

                animationFrameId = requestAnimationFrame(updateSliderAndLabels);

            } else {
                console.error("One or more required elements (slider or labels) not found!");
            }
        });
    </script>
</body>
</html>
